<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><style>body {
  max-width: 980px;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 45px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable,
.markdown-body .highlighttable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr,
.markdown-body .highlighttable {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite,
.markdown-body .highlighttable pre,
.markdown-body .highlighttable div.highlight {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td,
.markdown-body .highlighttable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headerlink {
  font: normal 400 16px fontawesome-mini;
  vertical-align: middle;
  margin-left: -16px;
  float: left;
  display: inline-block;
  text-decoration: none;
  opacity: 0;
  color: #333;
}

.markdown-body .headerlink:focus {
  outline: none;
}

.markdown-body h1 .headerlink {
  margin-top: 0.8rem;
}

.markdown-body h2 .headerlink,
.markdown-body h3 .headerlink {
  margin-top: 0.6rem;
}

.markdown-body h4 .headerlink {
  margin-top: 0.2rem;
}

.markdown-body h5 .headerlink,
.markdown-body h6 .headerlink {
  margin-top: 0;
}

.markdown-body .headerlink:hover,
.markdown-body h1:hover .headerlink,
.markdown-body h2:hover .headerlink,
.markdown-body h3:hover .headerlink,
.markdown-body h4:hover .headerlink,
.markdown-body h5:hover .headerlink,
.markdown-body h6:hover .headerlink {
  opacity: 1;
  text-decoration: none;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite,
.markdown-body .highlight {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body .highlight pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre,
.markdown-body .highlight pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* MultiMarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px fontawesome-mini;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\e157';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

.markdown-body diagram-div, .markdown-body div.uml-sequence-diagram, .markdown-body, div.uml-flowchart {
  overflow: auto;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><style>/*GitHub*/
.highlight {background-color:#fff;color:#333333;}
.highlight .hll {background-color:#ffffcc;}
.highlight .c{color:#999988;font-style:italic}
.highlight .err{color:#a61717;background-color:#e3d2d2}
.highlight .k{font-weight:bold}
.highlight .o{font-weight:bold}
.highlight .cm{color:#999988;font-style:italic}
.highlight .cp{color:#999999;font-weight:bold}
.highlight .c1{color:#999988;font-style:italic}
.highlight .cs{color:#999999;font-weight:bold;font-style:italic}
.highlight .gd{color:#000000;background-color:#ffdddd}
.highlight .ge{font-style:italic}
.highlight .gr{color:#aa0000}
.highlight .gh{color:#999999}
.highlight .gi{color:#000000;background-color:#ddffdd}
.highlight .go{color:#888888}
.highlight .gp{color:#555555}
.highlight .gs{font-weight:bold}
.highlight .gu{color:#800080;font-weight:bold}
.highlight .gt{color:#aa0000}
.highlight .kc{font-weight:bold}
.highlight .kd{font-weight:bold}
.highlight .kn{font-weight:bold}
.highlight .kp{font-weight:bold}
.highlight .kr{font-weight:bold}
.highlight .kt{color:#445588;font-weight:bold}
.highlight .m{color:#009999}
.highlight .s{color:#dd1144}
.highlight .n{color:#333333}
.highlight .na{color:teal}
.highlight .nb{color:#0086b3}
.highlight .nc{color:#445588;font-weight:bold}
.highlight .no{color:teal}
.highlight .ni{color:purple}
.highlight .ne{color:#990000;font-weight:bold}
.highlight .nf{color:#990000;font-weight:bold}
.highlight .nn{color:#555555}
.highlight .nt{color:navy}
.highlight .nv{color:teal}
.highlight .ow{font-weight:bold}
.highlight .w{color:#bbbbbb}
.highlight .mf{color:#009999}
.highlight .mh{color:#009999}
.highlight .mi{color:#009999}
.highlight .mo{color:#009999}
.highlight .sb{color:#dd1144}
.highlight .sc{color:#dd1144}
.highlight .sd{color:#dd1144}
.highlight .s2{color:#dd1144}
.highlight .se{color:#dd1144}
.highlight .sh{color:#dd1144}
.highlight .si{color:#dd1144}
.highlight .sx{color:#dd1144}
.highlight .sr{color:#009926}
.highlight .s1{color:#dd1144}
.highlight .ss{color:#990073}
.highlight .bp{color:#999999}
.highlight .vc{color:teal}
.highlight .vg{color:teal}
.highlight .vi{color:teal}
.highlight .il{color:#009999}
.highlight .gc{color:#999;background-color:#EAF2F5}
</style><title>specs</title></head><body><article class="markdown-body"><h1 id="knight-v20">Knight (v2.0)<a class="headerlink" href="#knight-v20" title="Permanent link"></a></h1>
<p>Knight is a simple programing language, designed with the goal of being easily implementable in nearly every language. Since each language has a slightly different way of doing things, the Knight specs may leave some things up to the implementation. This allows each language to implement Knight in the most idiomatic way possible.</p>
<h2 id="undefined-behaviour">Undefined Behaviour<a class="headerlink" href="#undefined-behaviour" title="Permanent link"></a></h2>
<p>Throughout this document, there will be places where something is described as <strong>undefined behaviour</strong>. If undefined behaviour is ever encountered during the course of a Knight program, then the entire program is invalid; implementations may do whatever they want (including ignoring the error, segfaulting, custom extension behaviour, etc.).</p>
<p>Some forms of undefined behaviour may be easier to check than others. For example, division by zero is almost universally some form of error, so most implementation languages can easily check for that. Yet, integer arithmetic functions that over/underflow may be more difficult in languages like JavaScript or Ruby.</p>
<p>To reiterate, <strong>if at any point during the parsing or execution of a Knight program, any form of undefined behaviour is encountered, the entire program is ill-defined, and implementations may do whatever they want.</strong>
&lt;!&ndash; </p>
<h1 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link"></a></h1>
<ol>
<li><a href="#syntax">Syntax</a>
    1.0 <a href="#10-encoding">Encoding</a><br />
    1.1 <a href="#11-whitespace">Whitespace</a><br />
    1.2 <a href="#12-comment">Comment</a><br />
    1.3 <a href="#13-number">Integer</a><br />
    1.4 <a href="#14-string">String</a><br />
    1.5 <a href="#15-variable">Variable</a><br />
    1.6 <a href="#16-function">Function</a>  </li>
<li><a href="#types">Types</a> &ndash;&gt;</li>
</ol>
<h1 id="table-of-contents_1">Table of Contents<a class="headerlink" href="#table-of-contents_1" title="Permanent link"></a></h1>
<ol start="0">
<li><a href="#0-command-line-arguments">Command Line Arguments</a>  </li>
<li><a href="#1-syntax">Syntax</a><br />
    1.0 <a href="#10-encoding">Encoding</a><br />
    1.1 <a href="#11-whitespace">Whitespace</a><br />
    1.2 <a href="#12-comment">Comment</a><br />
    1.3 <a href="#13-number">Integer</a><br />
    1.4 <a href="#14-string">String</a><br />
    1.5 <a href="#15-variable">Variable</a><br />
    1.6 <a href="#16-function">Function</a>  </li>
<li><a href="#2-types">Types</a><br />
    2.1 <a href="#21-number">Integer</a><br />
    2.2 <a href="#22-string">String</a><br />
    2.3 <a href="#23-boolean">Boolean</a><br />
    2.4 <a href="#24-null">Null</a><br />
    2.5 <a href="#25-null">List</a>  </li>
<li><a href="#3-variables">Variables</a>  </li>
<li>
<p><a href="#4-function">Function</a><br />
    4.1.1 <a href="#411-true"><code>TRUE</code></a><br />
    4.1.2 <a href="#412-false"><code>FALSE</code></a><br />
    4.1.3 <a href="#413-null"><code>NULL</code></a><br />
    4.1.4 <a href="#414-prompt"><code>PROMPT</code></a><br />
    4.1.5 <a href="#415-random"><code>RANDOM</code></a><br />
    4.1.6 <a href="#416-"><code>@</code></a>  </p>
<p>4.2.1 <a href="#421-unchanged"><code>:</code></a><br />
4.2.2 <a href="#422-unchanged"><code>,</code></a><br />
4.2.3 <a href="#423-blockunevaluated"><code>BLOCK</code></a><br />
4.2.4 <a href="#424-callspecial"><code>CALL</code></a><br />
4.2.5 <a href="#4235-string"><code>`</code></a><br />
4.2.6 <a href="#426-quitnumber"><code>QUIT</code></a><br />
4.2.7 <a href="#427-boolean"><code>!</code></a><br />
4.2.8 <a href="#428-lengthstring"><code>LENGTH</code></a><br />
4.2.9 <a href="#429-dumpunchanged"><code>DUMP</code></a><br />
4.2.10 <a href="#4210-outputstring"><code>OUTPUT</code></a><br />
4.2.11 <a href="#4211-asciiunchanged"><code>ASCII</code></a><br />
4.2.12 <a href="#4212-number"><code>~</code></a>  </p>
<p>4.3.1 <a href="#431-unchanged-coerce"><code>+</code></a><br />
4.3.2 <a href="#432--unchanged-number"><code>-</code></a><br />
4.3.3 <a href="#433-unchanged-coerce"><code>*</code></a><br />
4.3.4 <a href="#434-unchanged-number"><code>/</code></a><br />
4.3.5 <a href="#435-unchanged-number"><code>%</code></a><br />
4.3.6 <a href="#436-unchanged-number"><code>^</code></a><br />
4.3.7 <a href="#437-unchanged-coerce"><code>&lt;</code></a><br />
4.3.8 <a href="#438-unchanged-coerce"><code>&gt;</code></a><br />
4.3.9 <a href="#439-unchanged-unchanged"><code>?</code></a><br />
4.3.10 <a href="#4311-unchanged-unevaluated"><code>&amp;</code></a><br />
4.3.11 <a href="#4310-unchanged-unevaluated"><code>|</code></a><br />
4.3.12 <a href="#4312-unchanged-unchanged"><code>;</code></a><br />
4.3.13 <a href="#4313-unevaluated-unchanged"><code>=</code></a><br />
4.3.14 <a href="#4314-whileunevaluated-unevaluated"><code>WHILE</code></a><br />
4.3.15 <a href="#4314-rangeunchanged-coerce"><code>.</code></a>  </p>
<p>4.4.1 <a href="#441-ifboolean-unevaluated-unevaluated"><code>IF</code></a><br />
4.4.2 <a href="#442-getstring-number-number"><code>GET</code></a>  </p>
<p>4.5.1 <a href="#451-substitutestring-number-number-string"><code>SET</code></a><br />
5. <a href="#6-extensions">Optional Extensions</a> </p>
</li>
</ol>
<h1 id="syntax">Syntax<a class="headerlink" href="#syntax" title="Permanent link"></a></h1>
<p>Knight is a Polish-Notation (PN) language: Instead of the traditional &ldquo;infix notation&rdquo; (e.g. <code>output(1 + 2 * 4)</code>), functions come <em>before</em> their arguments (e.g. <code>OUTPUT + 1 * 2 4</code>).</p>
<p>Knight does not have a distinction between statements and expressions. Every function in Knight returns a value, which is then usable in other functions. So, instead of the c-style syntax of
<div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">output</span><span class="p">(</span><span class="s">&quot;hi&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">output</span><span class="p">(</span><span class="s">&quot;bye&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
Knight allows you to utilize the return value of <code>IF</code>:
<div class="highlight"><pre>OUTPUT IF &lt; x 3 &quot;hi&quot; &quot;bye&quot;
</pre></div></p>
<p>Knight programs consist of a single expression—such as <code>OUTPUT 3</code>, <code>; (= a 4) (OUTPUT (+ "a=" a))</code>, etc. Any additional tokens after this first expression (i.e. anything other than <a href="#whitespace">whitespace</a> and <a href="#comments">comments</a>) is <strong>undefined behaviour</strong>. </p>
<h2 id="required-encoding">Required Encoding<a class="headerlink" href="#required-encoding" title="Permanent link"></a></h2>
<p>To make Knight implementable in nearly every language, only the following subset of ASCII characters is required to be supported. Implementations may support a superset of this (for example, all of ASCII, or all of Unicode), but this is not required.
<div class="highlight"><pre>    [tab] [newline] [carriage return] [space] 
      ! &quot; # $ % &amp; &#39; ( ) * + , - . /
    0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ?
    @ A B C D E F G H I J K L M N O
    P Q R S T U V W X Y Z [ \ ] ^ _
    ` a b c d e f g h i j k l m n o
    p q r s t u v w x y z { | } ~
</pre></div>
It is <strong>undefined behaviour</strong> for any character not in this list to appear anywhere within Knight source code (including within comments), and within <a href="#string">String</a>s (including those returned from <a href="#prompt"><code>PROMPT</code></a>). Again, implementations are free to support more than this, but this is the bare minimum.</p>
<h2 id="whitespace-characters">Whitespace characters<a class="headerlink" href="#whitespace-characters" title="Permanent link"></a></h2>
<p>Due to the nature of Knight&rsquo;s syntax, whitespace isn&rsquo;t always necessary. For example, <code>OUTPUT1</code> should be parsed as two tokens, <code>OUTPUT</code> and <code>1</code>. However, there are some times that whitespace is needed in order to distinguish different tokens (such as between two identifiers).</p>
<p>Implementations are required to recognize a minimum of the following characters as whitespace:
- Tab (<code>0x09</code>, i.e. <code>\t</code>)
- Newline (<code>0x0a</code>, i.e. <code>\n</code>)
- Carriage return (<code>0x0d</code>, i.e. <code>\r</code>)
- Space (<code>0x20</code>, i.e. a space—<code></code>)
Note that the left and right round parenthesis can also be treated as whitespace when parsing. See <a href="#parenthesis-groupings">Parenthesis Groupings</a> for details. Additionally, the <a href="#operator-noop"><code>:</code> function</a> does nothing, and can be safely parsed as whitespace. However, when referring to whitespace later on in this document (for example, in the <a href="#string-contexts"><code>string -&gt; integer</code> conversion</a>), these shouldn&rsquo;t be included.</p>
<h2 id="comments">Comments<a class="headerlink" href="#comments" title="Permanent link"></a></h2>
<p>Comments in Knight start with pound sign (<code>0x23</code>, i.e. <code>#</code>) and go until a newline character (<code>0x0a</code>, i.e. <code>\n</code>) is encountered, or the end of the file. Everything after the <code>#</code> is ignored. Note that comments still must conform to <a href="#required-encoding">knight&rsquo;s encoding</a>.</p>
<p>There are no multiline or embedded comments in Knight.</p>
<p>For those familiar with regex, comments are <code>/#[^\n]*(\n|$)/</code>.</p>
<h2 id="integer-parsing">Integer Parsing<a class="headerlink" href="#integer-parsing" title="Permanent link"></a></h2>
<p>Integer literals are simply a sequence of ASCII digits (i.e. <code>0</code> (<code>0x30</code>) through <code>9</code> (<code>0x39</code>)). Leading <code>0</code>s do not indicate octal numbers (e.g. <code>011</code> is the number eleven, not nine). No other bases are supported, and only integral numbers are allowed.</p>
<p>Like some languages, Knight doesn&rsquo;t have negative integer literals. Instead, the <a href="#negation"><code>~</code></a> (numerical negation) function must be used: <code>~5</code>. However, implementations are free to parse this as the number <code>-5</code>, as it has the same effect.</p>
<p>Integer literals larger than the <a href="#integer-bounds">maximum required size</a> is <strong>undefined behaviour</strong>.</p>
<p>For those familiar with regex, integers are <code>/[0-9]+/</code>.</p>
<h2 id="string-parsing">String Parsing<a class="headerlink" href="#string-parsing" title="Permanent link"></a></h2>
<p>String literals in Knight begin with with either a single quote (<code>0x27</code>, i.e. <code>'</code>) or a double quote (<code>0x22</code>, i.e. <code>"</code>). All characters are taken literally until the opening quote is encountered again. This means that there are no escape sequences within string literals; if you want a newline character, you will have to do:
<div class="highlight"><pre>OUTPUT &quot;this is a newline:
cool, right?&quot;
</pre></div>
Due to the lack of escape sequences, each string may only contain one of the two types of quotes (as the same quote again denotes the end of a string). There is no difference between single quoted or double quoted strings (asides from the fact that double quotes can appear in single-quoted strings and vice versa).</p>
<p>It is <strong>undefined behaviour</strong> for string literals to not have a closing quote.</p>
<p>While highly unlikely to be encountered in an actual program, it is also <strong>undefined behaviour</strong> for a string literal&rsquo;s length to exceed the <a href="#integer-bounds">maximum integer size</a>.</p>
<p>For those familiar with regex, strings are <code>/'[^']*'|"[^"]*"/</code>.</p>
<h2 id="variable-parsing">Variable Parsing<a class="headerlink" href="#variable-parsing" title="Permanent link"></a></h2>
<p>In Knight, all variables are lower case—upper case letters are reserved for builtin functions. Variable names must start with an ASCII lower case letter (i.e. <code>a</code> (<code>0x61</code>) through <code>z</code> (<code>0x7a</code>)) or an underscore (<code>_</code> (<code>0x5f</code>)). After the initial letter, variable names may also include ASCII digits (i.e. <code>0</code> (<code>0x30</code>) through <code>9</code> (<code>0x39</code>)).</p>
<p>Implementations are required to support variable names of at least 127 characters, although they may choose to allow longer variable names.</p>
<p>For those familiar with regex, variables are <code>/[a-z_][a-z_0-9]*/</code>.</p>
<h2 id="function-parsing">Function Parsing<a class="headerlink" href="#function-parsing" title="Permanent link"></a></h2>
<p>In Knight, there are two different styles of functions: symbolic and word-based functions. In both cases, the function is uniquely identified by its first character; the distinction merely determines how the function name is parsed.</p>
<p>Word-based functions start with a single uppercase letter, such as <code>I</code> for <code>IF</code> or <code>R</code> for <code>RANDOM</code>, and may contain any amount of upper case letters and <code>_</code> afterwards. This means that <code>R</code>, <code>RAND</code>, <code>RANDOM</code>, <code>RAND_INT</code>, <code>RAND_OM_NUMBER</code> <code>R___</code>, etc. are all the same function—the <code>R</code> function.</p>
<p>In contrast, symbolic functions are functions that are a single symbol, such as <code>;</code> or <code>%</code>. Unlike word-based functions, they should not consume additional characters following them. The character stream <code>+++</code> should be parsed identically to <code>+ + +</code>—three separate addition functions.</p>
<p>Every function has a predetermined arity: There are no variadic functions. After parsing a function&rsquo;s name, an amount of expressions corresponding to that function&rsquo;s arity should be parsed: For example, after parsing a <code>+</code>, two expressions must be parsed, such as <code>+ 1 2</code>. It is <strong>undefined behaviour</strong> for a program to contain fewer expressions than are required for the function. While not necessary, it&rsquo;s recommended to provide some form of error message (if it&rsquo;s easy to implement), such as <code>missing argument 2 for '+'</code>, or even <code>missing an argument</code>.</p>
<p>The list of required functions are as follows. Implementations may define additional symbolic or keyword-based functions as desired. (For details on what individual functions mean, see <a href="/Users/sampersand/code/knight/knight-lang/functions"><code>Semantics</code></a>.)</p>
<ul>
<li>Arity <code>0</code>: <code>TRUE</code>, <code>FALSE</code>, <code>NULL</code>, <code>@</code>, <code>PROMPT</code>, <code>RANDOM</code></li>
<li>Arity <code>1</code>: <code>:</code>, <code>BLOCK</code>, <code>CALL</code>, <code>QUIT</code>, <code>DUMP</code>, <code>OUTPUT</code>, <code>ASCII</code>, <code>LENGTH</code>, <code>!</code>, <code>~</code>, <code>,</code>, <code>[</code>, <code>]</code></li>
<li>Arity <code>2</code>: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>^</code>, <code>&lt;</code>, <code>&gt;</code>, <code>?</code>, <code>&amp;</code>, <code>|</code>, <code>;</code>, <code>=</code>, <code>WHILE</code></li>
<li>Arity <code>3</code>: <code>IF</code>, <code>GET</code></li>
<li>Arity <code>4</code>: <code>SET</code></li>
</ul>
<h3 id="function-literals">Function Literals<a class="headerlink" href="#function-literals" title="Permanent link"></a></h3>
<p>Short note on <code>TRUE</code>/<code>FALSE</code>/<code>NULL</code>/<code>@</code>: As they are functions that take no arguments, simply return a value (true, false, null, and an empty list, respectively), they can be instead interpreted as literals. That is, there&rsquo;s no functional difference between parsing <code>TRUE</code> as a function, and then executing that function and parsing <code>TRUE</code> as a boolean literal.</p>
<h3 id="implementation-defined-functions">Implementation-Defined Functions<a class="headerlink" href="#implementation-defined-functions" title="Permanent link"></a></h3>
<p>Implementations may define their own functions, as long as they start with an upper-case letter or a symbol. Note that the <code>X</code> function name is explicitly reserved for extensions. See <a href="#extensions">Extensions</a> for more details.</p>
<h2 id="parenthesis-groupings">Parenthesis Groupings<a class="headerlink" href="#parenthesis-groupings" title="Permanent link"></a></h2>
<p>Because all Knight is a polish-notation language with only fixed-arity functions (see <a href="#functions">Functions</a>), grouping is not at all required to make valid programs. But writing large Knight programs can get a bit difficult, as a single mistake can lead to the parser misinterpreting everything. So, as an aid, the left and right round parenthesis (<code>0x28</code> and <code>0x29</code>, i.e. <code>(</code> and <code>)</code>) can be used to enclose expressions. It is <strong>undefined behaviour</strong> for these parenthesis to not enclose a single expression.</p>
<p>Since these parenthesis do not change the parsing of valid Knight programs, and don&rsquo;t affect the runtime in any way whatsoever, implementations <em>are free to treat them as whitespace</em>. These implementations will still run valid Knight programs correctly.</p>
<p>This requirement for valid Knight programs simply exists so that implementations that wish to do parenthesis checking won&rsquo;t accidentally reject valid programs. Here&rsquo;s some examples of programs:
<div class="highlight"><pre>OUTPUT * a 2         # legal, no parens
(OUTPUT * a 2)       # legal, parens are valid
(OUTPUT (* (a) (2))) # legal, parens are valid
OUTPUT * ((((a)))) 2 # legal, parens can nest.
= (a) 4              # legal, identifiers here are no different

OUTPUT (* a 2  # illegal, mismatched parens
OUTPUT (*) a 2 # illegal, not enclosing a single expression
OUTPUT ((*) a 2) # illegal, the `(*)` isn&#39;t a single expression
</pre></div></p>
<h2 id="parsing-example">Parsing Example<a class="headerlink" href="#parsing-example" title="Permanent link"></a></h2>
<p>Here&rsquo;s an example of a simple guessing game, and how it should be parsed:
<div class="highlight"><pre># Simple guessing game
; = secret RANDOM
; = guess + 0 PROMPT
  OUTPUT IF (? secret guess) &quot;correct!&quot; &quot;wrong!&quot;
</pre></div>
<div class="highlight"><pre>[;]
 ├──[=]
 │   ├──[secret]
 │   └──[RANDOM]
 └──[;]
     ├──[=]
     │   ├──[guess]
     │   └──[+]
     │       ├──[0]
     │       └──[PROMPT]
     └──[OUTPUT]
         └──[IF]
             ├──[?]
             │   ├──[secret]
             │   └──[guess]
             ├──[&quot;correct!&quot;]
             └──[&quot;wrong!&quot;]
</pre></div></p>
<h1 id="types">Types<a class="headerlink" href="#types" title="Permanent link"></a></h1>
<p>Knight itself only has a handful of types—<a href="#todo"><code>Integer</code>s</a>, <a href="#todo"><code>String</code>s</a>, <a href="#todo"><code>Boolean</code>s</a>, <a href="#todo"><code>Null</code></a>, <a href="#todo"><code>List</code>s</a>, and <a href="#todo"><code>Block</code>s</a>. Knight functions frequently perform coercion, converting their arguments from one type to another. As such, every type but <code>Block</code> have <code>integer</code>, <code>string</code>, <code>boolean</code>, and <code>list</code> coercions defined.</p>
<p>All types in Knight are <strong>immutable</strong>, including strings and lists.</p>
<h2 id="coercions">Coercions<a class="headerlink" href="#coercions" title="Permanent link"></a></h2>
<p>Many functions in Knight have contexts defined on them: They will automatically coerce their arguments from one type to another. For example, <a href="#operator-output"><code>OUTPUT</code></a> always coerces its argument into a string.</p>
<p>The following is a rough overview of all the different conversions. See each type&rsquo;s Coercion section for more details. Note that the <code>Block</code> has no conversions defined whatsoever, and using it in any conversion contexts is <strong>undefined behaviour</strong>.</p>
<table>
<thead>
<tr>
<th>Conversion From \ To</th>
<th><a href="#integer">Integer</a></th>
<th><a href="#string">String</a></th>
<th><a href="#boolean">Boolean</a></th>
<th><a href="#list">List</a></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#null">Null</a></td>
<td><code>0</code></td>
<td>empty string</td>
<td><code>false</code></td>
<td>empty list</td>
</tr>
<tr>
<td><a href="#integer">Integer</a></td>
<td>&lt;itself&gt;</td>
<td>what you expect</td>
<td>nonzero?</td>
<td>digits (negate if negative)</td>
</tr>
<tr>
<td><a href="#string">String</a></td>
<td>like C&rsquo;s <code>atoi</code></td>
<td>&lt;itself&gt;</td>
<td>nonempty?</td>
<td>individual chars</td>
</tr>
<tr>
<td><a href="#boolean">Boolean</a></td>
<td><code>1</code> for true, <code>0</code> for false</td>
<td><code>"true"</code> or <code>"false"</code></td>
<td>&lt;itself&gt;</td>
<td>empty list for false, <br> boxed <code>TRUE</code> for true</td>
</tr>
<tr>
<td><a href="#list">List</a></td>
<td>Length of list</td>
<td>list <a href="#operator-join">joined</a> by newline</td>
<td>nonempty?</td>
<td>&lt;itself&gt;</td>
</tr>
</tbody>
</table>
<h3 id="evaluation">Evaluation<a class="headerlink" href="#evaluation" title="Permanent link"></a></h3>
<p>All builtin types in Knight (i.e. Integer, String, Boolean, Null, and List) when evaluated, should return themselves. This is in contrast to variables and functions, which may return different values each time they&rsquo;re evaluated.</p>
<h2 id="integer-type">Integer Type<a class="headerlink" href="#integer-type" title="Permanent link"></a></h2>
<p>In Knight, only integral numbers exist—all functions which might return non-integral numbers are simply truncated (look at the the functions&rsquo; respective definitions for details on what exactly truncation means in each case).</p>
<p>All implementations must be able to represent all numbers within the range <code>-2147483648 .. 2147483647</code>, inclusive on both sides. (These are the bounds for 32-bit signed integers using 2&rsquo;s complement.) Implementations are free to support larger, and smaller numbers (for example, by using a 64 bit integer), however this is the bare minimum.</p>
<p>Note that all mathematical operations in Knight that would cause over/underflow for integers is considered <strong>undefined behaviour</strong>. This allows for implementations to freely use larger integer sizes and not have to worry about wraparounds.</p>
<h3 id="integer-contexts">Integer Contexts<a class="headerlink" href="#integer-contexts" title="Permanent link"></a></h3>
<p>(See <a href="#contexts">here</a> for more details on contexts.)</p>
<ul>
<li><strong>integer</strong>: In integer contexts, the integer itself is simply returned.</li>
<li><strong>string</strong>: In string contexts, numbers are converted to their base-10 representation. Negative numbers should have a <code>-</code> prepended to the beginning of the string (and positive numbers shouldn&rsquo;t get <code>+</code>). For example, <code>0 -&gt; "0"</code>, <code>123 -&gt; "123"</code>, and <code>~12 -&gt; "-12"</code>.</li>
<li><strong>boolean</strong>: In boolean contexts, zero becomes <code>false</code>, and all other numbers (ie nonzero) become <code>true</code>.</li>
<li><strong>list</strong>: In list contexts, the digits of the integer should be returned in ascending order. If the integer is negative, each digit shall become negated as well. For example, <code>+@123</code> would return a list of <code>1</code>, then <code>2</code>, then <code>3</code>, whereas <code>+@~123</code> would return a list of <code>-1</code>, <code>-2</code>, and <code>-3</code>.</li>
</ul>
<h2 id="string-type">String Type<a class="headerlink" href="#string-type" title="Permanent link"></a></h2>
<p>Strings in Knight are like strings in most other languages, albeit a bit simpler: They&rsquo;re immutable (like all types within Knight), and are <em>only</em> required to be able to represent a <a href="#required-encoding">specific subset of ASCII</a>. Implementations are free to support more characters (e.g. all of ASCII, or Unicode), but this is not required.</p>
<p>Note that, while fairly uncommon in practice, it still is <strong>undefined behaviour</strong> for Knight programs to attempt to create strings with a length larger than the maximum value for integers. (Thus, <code>LENGTH string</code> will always have a well-defined result.)</p>
<h3 id="string-contexts">String Contexts<a class="headerlink" href="#string-contexts" title="Permanent link"></a></h3>
<p>(See <a href="#contexts">here</a> for more details on contexts.)</p>
<ul>
<li><strong>integer</strong>: (This is roughly equivalent to C&rsquo;s <code>atoi</code>). To convert a string to an integer, the following is done: (1) strip all leading &ldquo;normal&rdquo; <a href="#whitespace-characters">whitespace</a>, (2) an optional <code>+</code> or <code>-</code> may occur (3) take as many ascii digits as possible, stopping at the first non-digit or end of string. Interpret those digits as a string literal, negating it if <code>-</code> occurred. If no digits are found, return zero. In regex terms, this is <code>/^\s*([-+?\d*)/</code>. Note that if the resulting number is out of bounds for what the integer type can handle, it is <strong>undefined behaviour</strong>.</li>
<li><strong>string</strong>: In string contexts, the string itself is returned.</li>
<li><strong>boolean</strong>: In boolean contexts, only empty strings are <code>false</code>. All other strings (ie nonempty) are <code>true</code>, including things like <code>"0"</code>.</li>
<li><strong>list</strong>: In list contexts, the characters of the string shall be returned, with each element of the list being a string containing just that character. (For example, <code>+@"abc"</code> would return a list of <code>"a"</code> followed by <code>"b"</code> followed by <code>"c"</code>).</li>
</ul>
<h2 id="boolean-type">Boolean Type<a class="headerlink" href="#boolean-type" title="Permanent link"></a></h2>
<p>The boolean type in Knight has two variants: <code>false</code> and <code>true</code>. These two values are used to indicate truthiness within Knight, and is the type that&rsquo;s should be converted to within boolean contexts.</p>
<h3 id="boolean-contexts">Boolean Contexts<a class="headerlink" href="#boolean-contexts" title="Permanent link"></a></h3>
<p>(See <a href="#contexts">here</a> for more details on contexts.)</p>
<ul>
<li><strong>integer</strong>: In integer contexts, <code>false</code> becomes <code>0</code> and <code>true</code> becomes <code>1</code>.</li>
<li><strong>string</strong>: In string contexts, <code>false</code> becomes <code>"false"</code> and <code>true</code> becomes <code>"true"</code>.</li>
<li><strong>boolean</strong>: In boolean contexts, the boolean itself is simply returned.</li>
<li><strong>list</strong>: In list contexts, <code>false</code> becomes an empty list and <code>true</code> becomes a list just containing <code>TRUE</code>. (i.e. <code>+@FALSE</code> is equivalent to <code>@</code>, whereas <code>+@TRUE</code> is equivalent to <code>,TRUE</code>).</li>
</ul>
<h2 id="the-null-type">The Null Type<a class="headerlink" href="#the-null-type" title="Permanent link"></a></h2>
<p>The <code>null</code> type is used to indicate the absence of a value within Knight, and is the return value of some function (such as <code>OUTPUT</code> and <code>WHILE</code>). While it does have conversions defined for all contexts, no conversions <em>into</em> <code>null</code> exist.</p>
<h3 id="null-contexts">Null Contexts<a class="headerlink" href="#null-contexts" title="Permanent link"></a></h3>
<p>(See <a href="#contexts">here</a> for more details on contexts.)</p>
<ul>
<li><strong>integer</strong>: In integer contexts, null becomes <code>0</code>.</li>
<li><strong>string</strong>: In string contexts, null becomes an <strong>empty string</strong> (notably, not <code>"null"</code>, as some languages do).</li>
<li><strong>boolean</strong>: In boolean contexts, null becomes <code>false</code>.</li>
<li><strong>list</strong>: In list contexts, null becomes an empty list.</li>
</ul>
<h2 id="list-type">List Type<a class="headerlink" href="#list-type" title="Permanent link"></a></h2>
<p>Lists are the only container type defined in Knight. Like most runtime languages, lists in Knight are heterogeneous—that is, the same list must be able to hold multiple values (e.g. both an integer and a string). Additionally, like strings, lists and entirely immutable: All operations that would normally modify a list in other languages simply returns a new list in Knight. Lastly, lists are ordered.</p>
<p>Note that, while fairly uncommon in practice, it still is <strong>undefined behaviour</strong> for Knight programs to attempt to create lists with a length larger than the maximum value for integers. (Thus, <code>LENGTH list</code> will always have a well-defined result.)</p>
<h3 id="list-contexts">List Contexts<a class="headerlink" href="#list-contexts" title="Permanent link"></a></h3>
<p>(See <a href="#contexts">here</a> for more details on contexts.)</p>
<ul>
<li><strong>integer</strong>: In integer contexts, lists return their length.</li>
<li><strong>string</strong>: In string contexts, lists should have their elements converted to a string, with a newline inserted between each element. (This is the same as calling the <a href="#power-operator"><code>^</code> operator</a> with a newline as the second argument). Because of this, an empty list becomes an empty string, and a list of just one element becomes just that element&rsquo;s string value.</li>
<li><strong>boolean</strong>: In boolean contexts, empty lists return <code>false</code>, and all other (i.e. nonempty) lists return true.</li>
<li><strong>list</strong>: In list contexts, the list itself is simply returned.</li>
</ul>
<h3 id="list-literals">List Literals<a class="headerlink" href="#list-literals" title="Permanent link"></a></h3>
<p>Due to Knight&rsquo;s fixed-arity syntax, it&rsquo;s impossible to have list literals (although you could definitely add them as an extension if you wanted). There&rsquo;s generally three ways to create lists in Knight:
<div class="highlight"><pre># Way 1, automatic coercion by adding something to `@`
+@123   # =&gt; a list of `1`, `2`, and `3`.
+@&quot;abc&quot; # =&gt; a list of `&quot;a&quot;`, `&quot;b&quot;`, and `&quot;c&quot;`.

# Way 2, adding &quot;boxed&quot; elements together:
+ (+ ,1 ,2) ,3 # =&gt; also a list of `1`, `2`, and `3`.
+ ,TRUE ,FALSE # =&gt; a list of `true` and `false`

# Way 3, doing some form of iteration:
; = list @
; WHILE &gt; 100 list # until the list is 100 elements long
    : = list + list ,LENGTH list # add the length of the list to it.
</pre></div></p>
<h2 id="block-type">Block Type<a class="headerlink" href="#block-type" title="Permanent link"></a></h2>
<p>The black sheep of Knight&rsquo;s types, the Block type is created in exactly one way: The return value of the <code>BLOCK</code> function. Blocks are used to used to delay execution of a piece of code until later, which acts as sort of a poor-man&rsquo;s function. The only way to execute a block&rsquo;s body is through the <code>CALL</code> function, which accepts only a single argument: the block to execute. Blocks do not take arguments, as all arguments are global variables.</p>
<h3 id="block-contexts">Block Contexts<a class="headerlink" href="#block-contexts" title="Permanent link"></a></h3>
<p>The Block type does not have any contexts defined. Attempting to coerce a Block into anything results in <strong>undefined behaviour</strong>.</p>
<h3 id="valid-functions-for-blocks">Valid functions for Blocks<a class="headerlink" href="#valid-functions-for-blocks" title="Permanent link"></a></h3>
<p>Because blocks aren&rsquo;t allowed to be used in any contexts, there&rsquo;s only a handful of places they may be used. Attempting to use them anywhere else is considered <strong>undefined behaviour</strong></p>
<ul>
<li>The sole argument to <code>:</code>, <code>BLOCK</code> itself (ie <code>BLOCK BLOCK ...</code>), <code>CALL</code>, and <code>,</code>.</li>
<li>The second argument to <code>=</code>, <code>&amp;</code>, <code>|</code>, or <code>WHILE</code></li>
<li>Either argument of <code>;</code></li>
<li>Either the second or third argument of <code>IF</code></li>
</ul>
<p>Notably, functions like <code>?</code> and <code>DUMP</code> do not require you to handle blocks at all.</p>
<h1 id="variables">Variables<a class="headerlink" href="#variables" title="Permanent link"></a></h1>
<p>All variables in Knight are global and last for the duration of the program; there are no function-local variables. This means that once a variable is assigned a value, the variable should be accessible at any point for the duration of the program. Also, like most runtime languages, variables are not typed—you can assign a string to a variable that previously held a block.</p>
<p>Implementations are only required to support variables between 1 and 127 characters long, however they may choose to support longer. As is described in the <a href="#variable-parsing">variable parsing</a> section, names must conform to the regex <code>/[a-z_][a-z0-9_]/</code>.</p>
<h2 id="possible-optimizations-for-variables">Possible optimizations for Variables<a class="headerlink" href="#possible-optimizations-for-variables" title="Permanent link"></a></h2>
<p>Note that while technically you&rsquo;re required to have every variable accessible at all times, and able to be assigned every type, Knight supports no form of introspection or evaluation (without optional extensions such as <code>EVAL</code> or <code>VALUE</code>). That is, there&rsquo;s no way at runtime to dynamically assign a variable name. So, if you can prove that a variable is unused after a certain point, or is only assigned a specific type, you should feel free to perform optimizations.</p>
<h2 id="variable-evaluation">Variable Evaluation<a class="headerlink" href="#variable-evaluation" title="Permanent link"></a></h2>
<p>When evaluated, the variable must return the value previously assigned to it, unevaluated. That is, if you say had <code>= foo BLOCK (QUIT 1)</code> beforehand and later on evaluated <code>foo</code>, it should return the block, and <em>not</em> quit the program. Note that it&rsquo;s possible for multiple variables to be associated with the same object within Knight (e.g. <code>= foo (= bar ...)</code>).</p>
<p>It&rsquo;s considered <strong>undefined behaviour</strong> to attempt to evaluate a variable when it hasn&rsquo;t been assigned a value yet. </p>
<!-- ## Contexts
In all contexts, variables should be evaluated and the result of evaluating it shall be then coerced to the correct context. For example, `+ 2 a` should first lookup `a`'s value, then coerce that value to an integer, than add it to `2`. -->

<h1 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link"></a></h1>
<p>Every function in Knight has a predetermined arity—there are no variadic functions.</p>
<p>Unless otherwise noted, all functions will <em>evaluate</em> their arguments beforehand. This means that <code>+ a b</code> should fetch the value of <code>a</code>, the value of <code>b</code>, and then add them together, and should <em>not</em> attempt to add a literal identifier to another literal identifier (which doesn&rsquo;t even make sense).</p>
<p>All arguments <em>must</em> be evaluated in order (from the first argument to the last)—functions such as <code>;</code> rely on this.</p>
<p>As mentioned before, any operators which would return a number outside of the implementation-supported number range, the return value is undefined. (i.e. integer overflow is an undefined operation.)</p>
<h3 id="evaluation-contexts">Evaluation Contexts<a class="headerlink" href="#evaluation-contexts" title="Permanent link"></a></h3>
<p>Certain functions impose certain contexts on their arguments, coercing other types to the required type. (See the <a href="#contexts"><code>Context</code></a> section for exact semantics.) The following are the contexts used within this document:</p>
<ul>
<li><code>string</code>: The argument must be evaluated, and then converted to a <a href="#string">String</a>.</li>
<li><code>boolean</code>: The argument must be evaluated, and then converted to a <a href="#boolean">Boolean</a>.</li>
<li><code>integer</code>: The argument must be evaluated, and then converted to an <a href="#integer">Integer</a>.</li>
<li><code>list</code>: The argument must be evaluated, and then converted to a <a href="#list">List</a>.</li>
<li><code>coerced</code>: The argument must be evaluated, and will then be coerced based on the first argument.</li>
<li><code>unchanged</code>: The argument must be evaluated, and is passed unchanged.</li>
<li><code>unevaluated</code>: The argument must not be evaluated at all.</li>
</ul>
<h2 id="nullary-arity-0">Nullary (Arity 0)<a class="headerlink" href="#nullary-arity-0" title="Permanent link"></a></h2>
<h3 id="true"><code>TRUE()</code><a class="headerlink" href="#true" title="Permanent link"></a></h3>
<p>The function <code>TRUE</code> simply returns the true boolean value.</p>
<p>As discussed in the <a href="#function-literals">Function Literals</a> section, <code>TRUE</code> may either be interpreted as a function of arity 0, or a literal value—they&rsquo;re equivalent. See the section for more details.</p>
<h3 id="false"><code>FALSE()</code><a class="headerlink" href="#false" title="Permanent link"></a></h3>
<p>The function <code>FALSE</code> simply returns the false boolean value.</p>
<p>As discussed in the <a href="#function-literals">Function Literals</a> section, <code>FALSE</code> may either be interpreted as a function of arity 0, or a literal value—they&rsquo;re equivalent. See the section for more details.</p>
<h3 id="null"><code>NULL()</code><a class="headerlink" href="#null" title="Permanent link"></a></h3>
<p>The function <code>NULL</code> simply returns the null value.</p>
<p>As discussed in the <a href="#function-literals">Function Literals</a> section, <code>NULL</code> may either be interpreted as a function of arity 0, or a literal value—they&rsquo;re equivalent. See the section for more details.</p>
<h3 id="_1"><code>@()</code><a class="headerlink" href="#_1" title="Permanent link"></a></h3>
<p>The function <code>@</code> simply returns the an empty list. This function exists because there&rsquo;s no easy way to get an empty list (other than <code>GET ,1 0 0</code>, which is terrible.)</p>
<p>As discussed in the <a href="#function-literals">Function Literals</a> section, <code>@</code> may either be interpreted as a function of arity 0, or a literal value—they&rsquo;re equivalent. See the section for more details.</p>
<h3 id="prompt"><code>PROMPT()</code><a class="headerlink" href="#prompt" title="Permanent link"></a></h3>
<p>The prompt function must read a line from stdin until the <code>\n</code> character is encountered, or an EOF occurs, whatever happens first. If the line ended with <code>\r\n</code> or <code>\n</code>, those character must be stripped out as well, regardless of the operating system. The resulting string (without trailing <code>\r\n</code>/<code>\n</code>) must be returned.</p>
<p>If EOF is reached before anything is read, <code>NULL</code> must be returned. This is to distinguish between end-of-file and a blank line (which would be just <code>\n</code> or <code>\r\n</code> before stripping).</p>
<p>It is <strong>undefined behaviour</strong> if an implementation is not able to read from stdin (e.g. it&rsquo;s closed, permissions issue, etc., but <em>not</em> EOF was reached, see previous line).</p>
<p>If the line that&rsquo;s read contains any characters that are not allowed to be in Knight strings (see <a href="#string-type">String</a>), this function&rsquo;s behaviour is undefined.</p>
<h3 id="random"><code>RANDOM()</code><a class="headerlink" href="#random" title="Permanent link"></a></h3>
<p>This function must return x (pseudo) random number between 0 and, at a minimum, 32767 (<code>0x7fff</code>). Implementations are free to return a larger random number if they desire; however, all random numbers must be zero or positive.</p>
<p>Note that <code>RANDOM</code> <em>should</em> return different numbers across subsequent calls and program executions (although this isn&rsquo;t strictly enforceable, by virtue of how random numbers work). However, programs should use a somewhat unique seed for every program run (e.g. a simple <code>srand(time(NULL)))</code> is sufficient).</p>
<h2 id="unary-arity-1">Unary (Arity 1)<a class="headerlink" href="#unary-arity-1" title="Permanent link"></a></h2>
<h3 id="fn-noop"><code>:(unchanged)</code><a class="headerlink" href="#fn-noop" title="Permanent link"></a></h3>
<p>A no-op: Simply returns its value unchanged (after executing it of course).</p>
<p>Note that <code>:</code> is the &ldquo;no-op&rdquo; function, and can be safely considered whitespace.</p>
<h3 id="fn-block"><code>BLOCK(unevaluated)</code><a class="headerlink" href="#fn-block" title="Permanent link"></a></h3>
<p>Unlike nearly every other function in Knight, the <code>BLOCK</code> function does <em>not</em> execute its argument—instead, it returns the argument, unevaluated. This is the only way for knight programs to get unevaluated blocks of code, which can be used for delayed execution.</p>
<p>The <code>BLOCK</code> function is intended to be used to create user-defined functions (which can be run via <a href="#fn-call"><code>CALL</code></a>.) However, as it simply returns its argument, there&rsquo;s no way to provide an arity to user-defined functions: you must simply use global variables:
<div class="highlight"><pre>; = max BLOCK
   : IF (&lt; a b) a b
; = a 3
; = b 4
: OUTPUT + &quot;maximum of a and b is: &quot; (CALL max)
</pre></div>
See the <a href="#ty-block">Block type</a> for exact semantics of how to use <code>BLOCK</code>&lsquo;s return value.</p>
<h3 id="fn-call"><code>CALL(&lt;special&gt;)</code><a class="headerlink" href="#fn-call" title="Permanent link"></a></h3>
<p>Just as <a href="#fn-block"><code>BLOCK</code></a> delays the execution of its argument, <code>CALL</code> should &ldquo;resume execution&rdquo; of the argument, evaluating as if the <code>BLOCK</code> as defined at the call site.</p>
<p>Example:
<div class="highlight"><pre>; = foo BLOCK bar
; = bar 3
; OUTPUT CALL foo # =&gt; 3
; = bar 4
: OUTPUT CALL foo # =&gt; 4
</pre></div></p>
<p>Calling this function with anything other than <a href="#fn-block"><code>BLOCK</code></a>&lsquo;s return value is considered <strong>undefined behaviour</strong>.</p>
<h3 id="fn-quit"><code>QUIT(number)</code><a class="headerlink" href="#fn-quit" title="Permanent link"></a></h3>
<p>Stops the entire Knight program with the given status code.</p>
<p>It is <strong>undefined behaviour</strong> if the given status code is not within 0 to 127. (However, since it is undefined behaviour, implementations are free to accept status codes outside this range.)</p>
<p>Example:
<div class="highlight"><pre>QUIT 12    # =&gt; exit with status 12
QUIT 0     # =&gt; exit with status 0
QUIT &quot;126&quot; # =&gt; exit with status 126
QUIT ~1    # undefined behaviour
</pre></div></p>
<h3 id="fn-output"><code>OUTPUT(string)</code><a class="headerlink" href="#fn-output" title="Permanent link"></a></h3>
<p>Writes the string to stdout, flushes stdout, and then returns <code>null</code>.</p>
<p>Normally, a newline should be written after <code>string</code> (which should also flush stdout on most systems.) However, if <code>string</code> ends with a backslash (<code>\</code>), the backslash is <em>not written to stdout</em>, and trailing newline is suppressed. </p>
<p>Example:
<div class="highlight"><pre># normal string
; OUTPUT &quot;foo&quot;
; OUTPUT &quot;&quot; # empty string also writes newline
; OUTPUT &quot;bar&quot;
foo

bar
# no trailing newline
; OUTPUT &quot;foo\&quot;
; OUTPUT &quot;bar&quot;
foobar
# With a string ending in `\n`
; OUTPUT &quot;foo
&quot;
; OUTPUT &quot;bar&quot;
foo

bar
</pre></div></p>
<p>It&rsquo;s <strong>undefined behaviour</strong> if an implementation is not able to write to stdout for some reason (e.g. it&rsquo;s closed, permission issues, etc.).</p>
<h3 id="fn-dump"><code>DUMP(unchanged)</code><a class="headerlink" href="#fn-dump" title="Permanent link"></a></h3>
<p>Dumps a debugging representation of its argument to stdout, and then returns it.</p>
<p>This function is meant to be used for debugging purposes (and unit testing), and not in finished Knight programs. As such, there is no strict requirement for the debugging representation.</p>
<p>However, if you want to use the Knight unit tests, then the output of this must conform to the following regexes, or the tester will get confused. (<strong>TODO</strong>: update these when the unit tester becomes updated.)</p>
<ul>
<li><code>Null()</code>,</li>
<li><code>Integer(&lt;number&gt;)</code> - <code>&lt;number&gt;</code> should be base-10, with a leading <code>-</code> if negative.</li>
<li><code>Boolean(&lt;bool&gt;)</code> - <code>&lt;bool&gt;</code> must be either <code>true</code> or <code>false</code>.</li>
<li><code>String(&lt;string&gt;)</code> - The literal contents of the string—no escaping whatsoever should be performed. (e.g. <code>DUMP "foo'b)ar\"</code> should write <code>String(foo'b)ar\)</code>).</li>
<li><code>List(...)</code> </li>
</ul>
<p>Note that it is <strong>undefined behaviour</strong> to pass a <code>Block</code> to this function, and the unit tester won&rsquo;t test for those. Thus, implementations may print out blocks if they want.</p>
<p>Like <a href="#fn-output"><code>OUTPUT</code></a>, it&rsquo;s <strong>undefined behaviour</strong> if there&rsquo;s any issues writing to stdout.</p>
<h3 id="fn-length"><code>LENGTH(list)</code><a class="headerlink" href="#fn-length" title="Permanent link"></a></h3>
<p>Returns the length of the argument when converted to a list.</p>
<p>Note: The length of strings are the same as the length of their list coercion, as the list coercion returns a list of the chars in the list.</p>
<p>Example:
<div class="highlight"><pre>LENGTH TRUE      # =&gt; 1
LENGTH FALSE     # =&gt; 0
LENGTH NULL      # =&gt; 0
LENGTH 1234      # =&gt; 4
LENGTH ~1234     # =&gt; 4
LENGTH &quot;hello!&quot;  # =&gt; 6
LENGTH @         # =&gt; 0
LENGTH (*,0 100) # =&gt; 100
</pre></div></p>
<h3 id="fn-not"><code>!(boolean)</code><a class="headerlink" href="#fn-not" title="Permanent link"></a></h3>
<p>Returns the logical negation of its argument—truthy values become <code>false</code>, and falsey values become <code>true</code>.</p>
<p>Example:
<div class="highlight"><pre>!TRUE # =&gt; false
!1234 # =&gt; false
!&quot;&quot;   # =&gt; true
!,0   # =&gt; true
</pre></div></p>
<h3 id="fn-negate"><code>~(number)</code><a class="headerlink" href="#fn-negate" title="Permanent link"></a></h3>
<p>Converts the argument to a number, then negates it. Note that this is numeric negation (i.e. like unary <code>-</code> in other languages) and <em>not</em> bitwise negation.</p>
<p>Example:
<div class="highlight"><pre>~38      # =&gt; -38
~0       # =&gt; 0
~(- 1 2) # =&gt; 1
~~5      # =&gt; 5
~TRUE    # =&gt; -1
~,123    # =&gt; -1
</pre></div></p>
<hr />
<h3 id="fn-ascii"><code>ASCII(unchanged)</code><a class="headerlink" href="#fn-ascii" title="Permanent link"></a></h3>
<p>The return value of this function depends on its first argument&rsquo;s type:</p>
<ul>
<li><strong><code>Integer</code></strong>: Interprets it as an ASCII codepoint, and returns a string containing just that character. It is <strong>undefined behaviour</strong> if the codepoint is not <a href="#required-encoding">in the encoding</a>.</li>
<li><strong><code>String</code></strong>: Converts and returns the first character&rsquo;s ASCII numerical equivalent. It is <strong>undefined behaviour</strong> if the string is empty.</li>
<li><strong>All other types</strong>: <strong>undefined behaviour</strong></li>
</ul>
<p>Implementations may feel free to extend <code>ASCII</code> to go beyond ascii, and to use support unicode. However, this is not required.</p>
<p>Example:
<div class="highlight"><pre>ASCII 38 # =&gt; &amp;
ASCII 50 # =&gt; ;
ASCII 10 # =&gt; &lt;newline&gt;
ASCII 19 # undefined (19 isnt valid)

ASCII &quot;H&quot;     # =&gt; 72
ASCII &quot;HELLO&quot; # =&gt; 72
ASCII &quot;
&quot; # =&gt; 10
ASCII &quot;&quot; # undefined (empty isnt valid)
</pre></div></p>
<h2 id="binary-arity-2">Binary (Arity 2)<a class="headerlink" href="#binary-arity-2" title="Permanent link"></a></h2>
<h3 id="fn-add"><code>+(unchanged, coerced)</code><a class="headerlink" href="#fn-add" title="Permanent link"></a></h3>
<p>The return value of this function depends on its first argument&rsquo;s type:</p>
<ul>
<li><strong><code>Integer</code></strong>: The second argument is coerced to an integer, and added to the first.</li>
<li><strong><code>String</code></strong>: The second argument is coerced to a string, and appended to the first.</li>
<li><strong><code>List</code></strong>: The second argument is coerced to a list, and then added to the first.</li>
<li><strong>All other types</strong>: <strong>undefined behaviour</strong>.</li>
</ul>
<p>Example:
<div class="highlight"><pre>+ &quot;2a&quot; 3         # =&gt; &quot;2a3&quot;
+ 3 &quot;2a&quot;         # =&gt; 5
+ @ &quot;abc&quot;        # =&gt; a list of &quot;a&quot;, &quot;b&quot;, and &quot;c&quot;
+ (+@12)  (+@34) # =&gt; a list of 1, 2, 3, and 4
+ (+@12) ,(+@34) # =&gt; a list of 1, 2, and a list of 3 and 4
</pre></div></p>
<h3 id="fn-subtract"><code>-(unchanged, coerced)</code><a class="headerlink" href="#fn-subtract" title="Permanent link"></a></h3>
<p>The return value of this function depends on its first argument&rsquo;s type:</p>
<ul>
<li><strong><code>Integer</code></strong>: The second argument is coerced to a number, and then subtracted from the first.</li>
<li><strong>All other types</strong>: <strong>undefined behaviour</strong></li>
</ul>
<p>Example:
<div class="highlight"><pre>For example, `- 3 &quot;2a&quot;` will return `1`.
</pre></div></p>
<h3 id="fn-multiply"><code>*(unchanged, coerced)</code><a class="headerlink" href="#fn-multiply" title="Permanent link"></a></h3>
<p>The return value of this function depends on its first argument&rsquo;s type:</p>
<ul>
<li><strong><code>Integer</code></strong>: The second argument is coerced to a number, and multiplied with the first</li>
<li><strong><code>String</code></strong>: The second argument is coerced to an integer, and then the first is repeated that many times. It is <strong>undefined behaviour</strong> if the second argument is negative.</li>
<li><strong><code>List</code></strong>: The second argument is coerced to an integer, and then the first is repeated that many times. It is <strong>undefined behaviour</strong> if the second argument is negative.</li>
<li><strong>All other types</strong>: <strong>undefined behaviour</strong></li>
</ul>
<p>Example:
<div class="highlight"><pre>* 3 &quot;2a&quot;  # =&gt; 6
* 3 FALSE # =&gt; 0
* &quot;2a&quot; 3  # =&gt; &quot;2a2a2a&quot;
* (,1) 5  # =&gt; a list of 5 1s
* &quot;2a&quot; ~3 # undefined, negative length
* (,1) ~1 # undefined, negative length
</pre></div></p>
<h3 id="fn-divide"><code>/(unchanged, number)</code><a class="headerlink" href="#fn-divide" title="Permanent link"></a></h3>
<p>The return value of this function depends on its first argument&rsquo;s type:
- <code>Integer</code>: The second argument is coerced to a number, and then divided from the first. Non-whole results must be rounded towards zero.
All other types constitute <strong>undefined behaviour</strong>.</p>
<p>It is <strong>undefined behaviour</strong> for the second argument to be zero.</p>
<p>For example, <code>/ 7 3</code> will return <code>2</code>, and <code>/ 5 "-3"</code> will return <code>-1</code>.</p>
<h3 id="fn-modulo"><code>%(unchanged, number)</code><a class="headerlink" href="#fn-modulo" title="Permanent link"></a></h3>
<p>The return value of this function depends on its first argument&rsquo;s type:
- <code>Integer</code>: The second argument is coerced to a number, and then the remainder of <code>&lt;arg1&gt; / &lt;arg2&gt;</code> is returned. You should round towards zero. Note that this means that, for all <code>a</code>, <code>a = (a/b)*b + a%b</code>.
If the second argument is not a positive number, the return value is undefined.
All other types constitute <strong>undefined behaviour</strong>.</p>
<p>For example, <code>% 7 3</code> will return <code>1</code>, and <code>% ~7 5</code> will return <code>-2</code>.</p>
<h3 id="436-unchanged-number">4.3.6 <code>^(unchanged, number)</code><a class="headerlink" href="#436-unchanged-number" title="Permanent link"></a></h3>
<p>If the first argument is a number, the second will be coerced to a number and the resulting exponentiation will be returned. Note that for an exponent of <code>0</code>, the return value should always be <code>1</code> for nonnegative numbers.</p>
<p>If the first argument is not a number, the return value of this function is undefined.
If the first argument is zero and the second argument is negative, the return value of this function is undefined.</p>
<h3 id="437-unchanged-coerced">4.3.7 <code>&lt;(unchanged, coerced)</code><a class="headerlink" href="#437-unchanged-coerced" title="Permanent link"></a></h3>
<p>The return value of this function depends on its first argument&rsquo;s type:
- <code>Integer</code>: Whether or not the first argument is numerically smaller than the second, which is coerced to a number, is returned.
- <code>String</code>: Whether or not the first argument is lexicographically smaller than the second, which is coerced to a string, is returned. See below for more details.
- <code>Boolean</code>: Whether the first argument is false and the second argument is, when coerced to a boolean, true is returned.
- All other types: The return value is undefined.</p>
<p>Lexicographical comparisons should find the first non-equivalent character in each string and compare them based on their ASCII value (e.g. in <code>abcd</code> and <code>abde</code>, <code>c</code> and <code>d</code> would be compared), returning <code>TRUE</code> if the first argument&rsquo;s character is smaller. If both strings have equivalent characters, then this function shall return <code>TRUE</code> only if the first string has a smaller size than the second.</p>
<p>The following is a list of valid string characters, where <code>[tab]</code> is smaller than everything (other than another tab), and <code>~</code> is larger than everything (other than another <code>~</code>).
<div class="highlight"><pre>    [tab] [newline] [carriage return] [space] 
      ! &quot; # $ % &amp; &#39; ( ) * + , - . /
    0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ?
    @ A B C D E F G H I J K L M N O
    P Q R S T U V W X Y Z [ \ ] ^ _
    ` a b c d e f g h i j k l m n o
    p q r s t u v w x y z { | } ~
</pre></div></p>
<h3 id="438-unchanged-coerced">4.3.8 <code>&gt;(unchanged, coerced)</code><a class="headerlink" href="#438-unchanged-coerced" title="Permanent link"></a></h3>
<p>This is exactly the same as <a href="#437-unchanged-coerced">4.3.7</a>, except for the operands reversed, i.e. <code>&gt; a b</code> should return the same mas <code>&lt; b a</code> (barring the fact that <code>a</code> should be evaluated before <code>b</code>).</p>
<h3 id="439-unchanged-unchanged">4.3.9 <code>?(unchanged, unchanged)</code><a class="headerlink" href="#439-unchanged-unchanged" title="Permanent link"></a></h3>
<p>Unlike nearly every other function in Knight, this one does not automatically coerced its arguments to any type—Instead, it checks to see if arguments are of the same type <em>and</em> value. For example, <code>1</code> is not equivalent to <code>"1"</code>, nor is it equivalent to <code>TRUE</code>.</p>
<p>This function is valid for the types <code>Integer</code>, <code>String</code>, <code>Boolean</code>, and <code>Null</code>. Notably, if either argument is a <code>BLOCK</code>&lsquo;s return value, the return value is undefined.</p>
<h3 id="4310-unchanged-unevaluated">4.3.10 <code>&amp;(unchanged, unevaluated)</code><a class="headerlink" href="#4310-unchanged-unevaluated" title="Permanent link"></a></h3>
<p>If the first argument, after being evaluated and coerced to a boolean, is <code>FALSE</code>, then the &ldquo;uncoerced&rdquo; first argument is returned. Otherwise, the second argument is evaluated and returned.</p>
<p>This function acts similarly to <code>&amp;&amp;</code> in most programming languages, where it only evaluates the second variable if the first is truthy.</p>
<p>For example, <code>&amp; 0 (QUIT 1)</code> shall return the value <code>0</code>, whilst <code>&amp; TRUE ""</code> shall return <code>""</code>.</p>
<h3 id="4311-unchanged-unevaluated">4.3.11 <code>|(unchanged, unevaluated)</code><a class="headerlink" href="#4311-unchanged-unevaluated" title="Permanent link"></a></h3>
<p>If the first argument, after being evaluated and coerced to a boolean, is <code>TRUE</code>, then the &ldquo;uncoerced&rdquo; first argument is returned. Otherwise, the second argument is evaluated and returned.</p>
<p>This function acts similarly to <code>||</code> in most programming languages, where it only evaluates the second variable if the first is falsey.</p>
<p>For example, <code>| "2" (QUIT 1)</code> shall return the value <code>"2"</code>, whilst <code>| FALSE 4</code> shall return <code>4</code>.</p>
<h3 id="4312-unchanged-unchanged">4.3.12 <code>;(unchanged, unchanged)</code><a class="headerlink" href="#4312-unchanged-unchanged" title="Permanent link"></a></h3>
<p>This function simply returns its second argument. It&rsquo;s entire purpose is to act as a &ldquo;sequence&rdquo; function, where the first argument&rsquo;s value can be safely ignored.</p>
<h3 id="4313-unevaluated-unchanged">4.3.13 <code>=(unevaluated, unchanged)</code><a class="headerlink" href="#4313-unevaluated-unchanged" title="Permanent link"></a></h3>
<p>Unless the first argument is a <a href="#3-variable">Variable</a>, this function is undefined.</p>
<p>This function assigns the variable identified by the first argument (which shall not be evaluated) to the second argument&rsquo;s value, after which it should return the second argument&rsquo;s value. That is, it performs the &ldquo;assignment&rdquo; operation for strings.</p>
<h3 id="4314-whileunevaluated-unevaluated">4.3.14 <code>WHILE(unevaluated, unevaluated)</code><a class="headerlink" href="#4314-whileunevaluated-unevaluated" title="Permanent link"></a></h3>
<p>This function will evaluate its second argument as long as its first evaluates to a truthy value. The return value shall be <code>NULL</code>.</p>
<p>Note that, unlike most programming languages, Knight does not have a builtin way to &ldquo;<code>continue</code>&rdquo; or &ldquo;<code>break</code>&rdquo; from a loop.
(returns null)</p>
<h2 id="44-ternary-arity-3">4.4 Ternary (Arity 3)<a class="headerlink" href="#44-ternary-arity-3" title="Permanent link"></a></h2>
<h3 id="441-ifboolean-unevaluated-unevaluated">4.4.1 <code>IF(boolean, unevaluated, unevaluated)</code><a class="headerlink" href="#441-ifboolean-unevaluated-unevaluated" title="Permanent link"></a></h3>
<p>This function will evaluate and return the second argument if the first argument is truthy. If the first argument is falsey, the third argument is evaluated and returned.</p>
<h3 id="442-getstring-number-number">4.4.2 <code>GET(string, number, number)</code><a class="headerlink" href="#442-getstring-number-number" title="Permanent link"></a></h3>
<p>This function is used to get a substring of the first argument. The substring should start at the second argument and be the length of the third. Indexing starts at <code>0</code>—that is, <code>GET "abc" 0 1</code> should return the <code>"a"</code>.</p>
<p>If either the starting point or the length are negative numbers, this function is undefined.
If the starting index is larger than or equal to the length of the string, the behaviour is undefined.
If the ending index (i.e. <code>start+length</code>) is larger than the length of the string, the behaviour is undefined.
To put it more concretely, unless the range <code>[start, start+length)</code> is entirely contained within the string, this function&rsquo;s return value is undefined. </p>
<p>For example, <code>GET "abcde" 2 2</code> would get the substring <code>"cd"</code>, and <code>GET "abcd" 2 0</code> would get <code>""</code>.</p>
<h2 id="45-quaternary-arity-4">4.5 Quaternary (Arity 4)<a class="headerlink" href="#45-quaternary-arity-4" title="Permanent link"></a></h2>
<h3 id="451-substitutestring-number-number-string">4.5.1 <code>SUBSTITUTE(string, number, number, string)</code><a class="headerlink" href="#451-substitutestring-number-number-string" title="Permanent link"></a></h3>
<p>This function is used to substitute the range <code>[start, start+length)</code> (where <code>start</code> is the second argument and <code>length</code> is the third)  of the first argument with the last. Note that they do not have to be the same length—the string should grow or shrink accordingly. Indexing starts at <code>0</code>—that is, <code>SET "abc" 0 1 "2"</code> should return the <code>"2bc"</code>. Also note that this function should return a new string—the original one should not be modified.</p>
<p>If either the starting point or the length are negative numbers, this function is undefined.
If the starting index is larger than the length of the string, the behaviour is undefined.
If the ending index (i.e. <code>start+length</code>) is larger than the length of the string, the behaviour is undefined.</p>
<p>For example, <code>SUBSTITUTE "abcd" 1 2 "3"</code> would return the string <code>"a3d"</code>.</p>
<h1 id="6-extensions">6 Extensions<a class="headerlink" href="#6-extensions" title="Permanent link"></a></h1>
<p>This section describes possible extensions that Knight implementations could add. Because these are extensions, none of them are required to be compliant. They&rsquo;re simply ways to make Knight more <del>enjoyable</del> bearable to write in. </p>
<h3 id="601-the-x-function">6.0.1 The <code>X</code> Function.<a class="headerlink" href="#601-the-x-function" title="Permanent link"></a></h3>
<p>Note that the function <code>X</code> is explicitly reserved for extensions: Knight will never use <code>X</code> for function names, and implementations are free to use it as they wish. Note that since this is reserved for extensions, they&rsquo;re free to &ldquo;overload&rdquo; it. That is, you can have different functions that all start with <code>X</code>, e.g., <code>X_OPENFILE</code>, <code>X_READFILE</code>, <code>X_CLOSEFILE</code>.</p>
<h2 id="61-valuestring-look-up-strings-as-variables">6.1 <code>VALUE(string)</code>: Look up strings as variables<a class="headerlink" href="#61-valuestring-look-up-strings-as-variables" title="Permanent link"></a></h2>
<p>This function would convert its argument to a string, then look it up as if it were a variable name. That is, it could be a replacement for <code>EVAL string</code>, when <code>string</code> is just a variable name.</p>
<h2 id="62-number-unary-minus">6.2 <code>~(number)</code>: Unary minus<a class="headerlink" href="#62-number-unary-minus" title="Permanent link"></a></h2>
<p>This has been incorporated into base knight as of v1.2, so this extension&rsquo;s no longer relevant. </p>
<h2 id="63-counting-parenthesis">6.3 Counting Parenthesis<a class="headerlink" href="#63-counting-parenthesis" title="Permanent link"></a></h2>
<p>Parenthesis in Knight are whitespace, and are used simply as a way to visually group things. However, as Knight programs are quite hard to debug, you could count parenthesis and ensure that parens match</p>
<h2 id="64-handle-undefined-behaviour">6.4 Handle undefined behaviour<a class="headerlink" href="#64-handle-undefined-behaviour" title="Permanent link"></a></h2>
<p>The Knight specs have a lot of undefined behaviour to leave a lot up to implementations. However, this means that writing Knight programs has a lot of potential pitfalls. As such, you may want to catch most forms of undefined behaviour and exit gracefully. (catching <em>all</em> forms is a bit much, e.g. integer overflow.)</p>
<h2 id="65-usestring-import-other-knight-files">6.5 <code>USE(string)</code>: Import other knight files<a class="headerlink" href="#65-usestring-import-other-knight-files" title="Permanent link"></a></h2>
<p>Currently, to import files, you need to use the <code>`</code> function: <code>EVAL ` + "cat " filename</code>. However, this is quite dangerous if <code>filename</code> has any shell characters in it. </p>
<h2 id="66-extensibility">6.6 Extensibility<a class="headerlink" href="#66-extensibility" title="Permanent link"></a></h2>
<h3 id="661-ability-to-register-new-arbitrary-native-functions">6.6.1 Ability to register new, arbitrary native functions<a class="headerlink" href="#661-ability-to-register-new-arbitrary-native-functions" title="Permanent link"></a></h3>
<h3 id="662-ability-to-register-new-arbitrary-native-types">6.6.2 Ability to register new, arbitrary native types<a class="headerlink" href="#662-ability-to-register-new-arbitrary-native-types" title="Permanent link"></a></h3>
<p>(e.g. arrays, floats)</p>
<h3 id="663-embedability-ie-toggle-dangerousio-commands">6.6.3 Embedability (i.e. toggle &ldquo;dangerous&rdquo;/io commands.)<a class="headerlink" href="#663-embedability-ie-toggle-dangerousio-commands" title="Permanent link"></a></h3>
<pre><code>4.2.2 [`EVAL`](#422-evalstring)
</code></pre>
<h1 id="0-command-line-arguments">0. Command Line Arguments<a class="headerlink" href="#0-command-line-arguments" title="Permanent link"></a></h1>
<p>If possible, Knight implementations are expected to parse command-line arguments. Program names, such as <code>argv[0]</code> in C, aren&rsquo;t considered part of the command line arguments.</p>
<p>If the first argument is <code>-e</code>, then the second argument must be interpreted as a Knight program and be executed directly.</p>
<p>If the first argument is <code>-f</code>, then the second argument must be interpreted as a filename. The file&rsquo;s contents should then be interpreted as Knight program. If any errors occur when accessing the file (such as: it doesn&rsquo;t exist, no read access, etc.), then the program&rsquo;s behaviour is undefined.</p>
<p>Implementations are free to define additional flags and behaviours outside of these requirements. (For example, printing a usage message when the first argument is not recognized.) However, these are not required: Programs which are not passed exactly one of the two previous options are considered ill-formed</p>
<h2 id="alternatives">Alternatives<a class="headerlink" href="#alternatives" title="Permanent link"></a></h2>
<p>Some programming languages (such as AWK) are not able to be invoked with a simple <code>./knight -e 'OUTPUT "hi"'</code>. While not ideal, implementations may define alternative ways to pass arguments, such as AWK&rsquo;s <code>./knight.awk -- -e 'OUTPUT "hi'</code>.</p>
<p>Some programming languages don&rsquo;t provide a way to access command line arguments at all, such as Knight itself. In this case, the program should read lines from stdin in place of command line arguments.</p>
<h3 id="422-evalstring">4.2.2 <code>EVAL(string)</code><a class="headerlink" href="#422-evalstring" title="Permanent link"></a></h3>
<p>This function takes a single string argument, which should be executed as if it where Knight source code. As such, the string should be valid Knight source code for your implementation. (i.e. a single expression, possibly with trailing tokens, depending on how the parser was impelmented.)</p>
<p>This function should act <em>as if</em> its invocation were replaced by the contents of the string, e.g.:
<div class="highlight"><pre>; = a 3
; = bar &quot;* a 4&quot;
: OUTPUT + &quot;a*4=&quot; (EVAL bar)
</pre></div>
should be equivalent to
<div class="highlight"><pre>; = a 3
; = bar &quot;* a 4&quot;
: OUTPUT + &quot;a*4=&quot; (* a 4)
</pre></div></p>
<h3 id="425-string">4.2.5 <code>`(string)</code><a class="headerlink" href="#425-string" title="Permanent link"></a></h3>
<p>Runs the string as a shell command, returning the stdout of the subshell.</p>
<p>If the subshell returns a nonzero status code, this function&rsquo;s behaviour is undefined.
If the subshell&rsquo;s stdout does not contain characters that can appear in a string (see <a href="#String">String</a>), this function&rsquo;s behaviour is undefined.</p>
<p>Everything else is left up to the implementation—what to do about stderr and stdin, whether to abort execution on failure or continue, how environment variables are propagated, etc.</p></article></body></html>